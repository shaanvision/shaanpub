# ShaanPub

**[Türkçe README için tıklayın](README.tr.md)**

Welcome to ShaanPub, a modern, lightweight, and extensible ActivityPub server built with Next.js. This project allows you to host your own decentralized social media identity on the Fediverse.

Developed by [Shaan Vision](https://www.shaanvision.com.tr).

## Features and Limitations

This project provides a simple and efficient way to establish a presence on the Fediverse. It includes a web interface to display your profile and posts. However, it's important to understand the trade-offs of this static approach.

### Advantages

*   **Lightweight and Fast:** Being a static site, it's extremely fast and requires minimal server resources.
*   **Easy to Deploy:** The build process generates a simple directory of static files that can be hosted on any platform that supports Node.js.
*   **Secure:** With no dynamic server-side processing for user interactions, the attack surface is significantly reduced.

### Disadvantages

*   **Read-Only Identity:** This is a static implementation, which means it doesn't support dynamic ActivityPub features. Your identity on the Fediverse will be "read-only."
*   **No Dynamic Interactions:** Functions like following other users, being followed, receiving notifications, or federating content in real-time are not supported.
*   **Manual Updates:** New posts or profile changes require rebuilding and redeploying the entire site.

## How It Works

ShaanPub uses a hybrid architecture to combine the power of a static Next.js site with a custom Express.js server. Here’s a breakdown of the process:

1.  **Static Site Generation:** The `next build` command, configured with `output: 'export'`, generates a fully static version of the Next.js frontend into the `out/` directory.
2.  **ActivityPub File Generation:** After the build, the `scripts/generate-static-activitypub.ts` script runs. It creates the necessary static JSON files for ActivityPub (like `actor.json`, `.well-known/webfinger`, etc.) and places them in the `out/` directory.
3.  **Custom Express Server:** Instead of a standard static file server, ShaanPub uses a custom server (`server.mjs`). This is crucial for setting the correct `Content-Type` headers for the ActivityPub and WebFinger routes (e.g., `application/activity+json`), which is not possible with a standard Next.js static export. The server also handles the clean URL routing for the Next.js pages.

## Project Structure

-   `src/app/`: This is where the Next.js application lives. All the frontend pages and components are here.
-   `public/`: This directory contains static assets like images and fonts that are served directly.
-   `scripts/`: This directory contains helper scripts.
    -   `generate-static-activitypub.ts`: This script is responsible for creating the static ActivityPub files after the Next.js build is complete.
-   `out/`: This directory is generated by the build process and contains the final static site and ActivityPub files that are served by the custom server. **Do not edit this directory directly.**
-   `server.mjs`: The custom Express.js server that serves the static files from the `out/` directory and handles the special routing for ActivityPub.

## Getting Started

### Prerequisites

-   Node.js (v18 or higher)
-   npm

### Installation

1.  Clone the repository:
    ```bash
    git clone <repository-url>
    ```
2.  Install the dependencies:
    ```bash
    npm install
    ```

### Local Development

1.  To run the Next.js development server (for frontend work):
    ```bash
    npm run dev
    ```
2.  To build the static site and ActivityPub files:
    ```bash
    npm run build
    ```
3.  To run the custom server and test the full application:
    ```bash
    npm start
    ```

## Deployment

To deploy ShaanPub, you need a hosting provider that can run a Node.js application.

1.  Push your code to the hosting provider.
2.  Make sure the build command is set to `npm run build`.
3.  Make sure the start command is set to `npm start`.
4.  The provider will run the build, generate the static files, and then start the custom server to serve your application.
